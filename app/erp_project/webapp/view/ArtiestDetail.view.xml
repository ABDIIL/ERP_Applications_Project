<mvc:View
  controllerName="my.project.erpproject.controller.ArtiestDetail"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:core="sap.ui.core"
  height="100%">

  <Page
    id="paginaArtiestDetail"
    title="{artiestNaam}"
    showNavButton="true"
    navButtonPress=".onNavBack"
    backgroundDesign="Solid"
    class="sapUiResponsivePadding--header sapUiResponsivePadding--content">

    <content>

      <Panel
        id="profileCard"
        backgroundDesign="Solid"
        class="sapUiSmallMarginBottom"
        expandable="false">
        <content>
          <VBox class="sapUiContentPadding" width="100%">
            <HBox alignItems="Center" justifyContent="Start" width="100%">

              <Avatar
                displayShape="Circle"
                displaySize="XL"
                initials="{path: 'artiestNaam', formatter: '.formatInitials'}"
                fallbackIcon="sap-icon://person-placeholder" />

              <VBox class="sapUiSmallMarginBegin" width="100%">
                <Title text="{artiestNaam}" level="H2" />

                <ObjectStatus
                  text="{path: 'populariteit', formatter: '.formatArtistLabel'}"
                  state="{path: 'populariteit', formatter: '.formatArtistLabelState'}" />

                <HBox class="sapUiTinyMarginTop" wrap="Wrap" alignItems="Center">
                  <Link
                    text="Open Spotify"
                    href="{path: 'artiestNaam', formatter: '.formatSpotifyUrl'}"
                    target="_blank" />
                  <Text text=" Â· " />
                  <Link
                    text="Open Instagram"
                    href="{path: 'artiestNaam', formatter: '.formatInstagramUrl'}"
                    target="_blank" />
                </HBox>

                <HBox class="sapUiTinyMarginTop" wrap="Wrap" alignItems="Center" width="100%">
                  <Label text="Genres" class="sapUiTinyMarginEnd" />

                  <ObjectStatus
                    class="sapUiTinyMarginEnd sapUiTinyMarginTop"
                    inverted="true"
                    text="{path: 'genre', formatter: '.formatGenre1'}"
                    state="{path: 'genre', formatter: '.formatGenreState1'}"
                    visible="{path: 'genre', formatter: '.formatGenreVisible1'}" />

                  <ObjectStatus
                    class="sapUiTinyMarginEnd sapUiTinyMarginTop"
                    inverted="true"
                    text="{path: 'genre', formatter: '.formatGenre2'}"
                    state="{path: 'genre', formatter: '.formatGenreState2'}"
                    visible="{path: 'genre', formatter: '.formatGenreVisible2'}" />

                  <ObjectStatus
                    class="sapUiTinyMarginEnd sapUiTinyMarginTop"
                    inverted="true"
                    text="{path: 'genre', formatter: '.formatGenre3'}"
                    state="{path: 'genre', formatter: '.formatGenreState3'}"
                    visible="{path: 'genre', formatter: '.formatGenreVisible3'}" />
                </HBox>

              </VBox>

            </HBox>
          </VBox>
        </content>
      </Panel>

      <Panel
        id="artistHeaderCard"
        backgroundDesign="Solid"
        class="sapUiSmallMarginBottom"
        expandable="false">
        <content>

          <VBox class="sapUiContentPadding" width="100%">
            <HBox width="100%" justifyContent="SpaceBetween" alignItems="Center">

              <ObjectHeader
                title="{artiestNaam}"
                intro="{genre}"
                backgroundDesign="Transparent">
                <layoutData>
                  <FlexItemData growFactor="1" />
                </layoutData>

                <attributes>
                  <ObjectAttribute title="Land" text="{land}" />
                  <ObjectAttribute title="Nationaliteit" text="{nationaliteit}" />
                  <ObjectAttribute title="Populariteit" text="{populariteit}" />
                  <ObjectAttribute title="Aantal reviews" text="{vm>/reviewCount}" />
                </attributes>
              </ObjectHeader>

              <VBox class="sapUiLargeMarginBegin sapUiTinyMarginEnd" width="12rem" alignItems="End">
                <layoutData>
                  <FlexItemData shrinkFactor="0" />
                </layoutData>

                <Label text="Reviews" class="sapUiTinyMarginBottom" />
                <RatingIndicator
                  maxValue="5"
                  value="{vm>/avgRating}"
                  displayOnly="true"
                  editable="false"
                  iconSize="30px"
                  tooltip="{= 'Gemiddelde review: ' + ${vm>/avgRating} + ' / 5' }" />
              </VBox>

            </HBox>
          </VBox>

        </content>
      </Panel>

      <IconTabBar
        id="tabsArtiestDetail"
        expanded="{device>/isNoPhone}"
        class="sapUiSmallMarginBottom">
        <items>

          <IconTabFilter key="profiel" text="Profiel">
            <VBox class="sapUiSmallMarginTop">
              <Title text="Biografie" level="H3" />
              <Text text="{biografie}" wrapping="true" />
            </VBox>
          </IconTabFilter>

          <IconTabFilter key="optredens" text="Optredens">
            <Table id="optredensTable" headerText="Optredens" inset="false">
              <columns>
                <Column><Text text="Dag" /></Column>
                <Column><Text text="Stage" /></Column>
                <Column><Text text="Start" /></Column>
                <Column><Text text="Einde" /></Column>
              </columns>
            </Table>
          </IconTabFilter>

          <IconTabFilter key="reviews" text="Reviews">
            <VBox class="sapUiSmallMarginTop">

              <HBox justifyContent="SpaceBetween" alignItems="Center" class="sapUiSmallMarginBottom">
                <ObjectNumber number="{vm>/avgRating}" unit="/ 5" />
                <Button text="Nieuwe review" type="Emphasized" press=".onOpenReviewDialog" />
              </HBox>

              <List id="reviewsList" headerText="Reviews" showSeparators="Inner" />

            </VBox>
          </IconTabFilter>

        </items>
      </IconTabBar>

    </content>

  </Page>

</mvc:View>
